{% extends 'dashboard/_layout.html.twig' %}

{% block title %}{{ 'dashboard.title'|trans }}{% endblock %}

{% block main %}
    <div class="mx-auto max-w-5xl">
        <twig:Card>
            <twig:CardBody>
                <div class="grid sm:grid-cols-2 md:grid-cols-4 gap-1">
                    {% for statistic in statistics %}
                        <div class="px-4 sm:px-6 py-6">
                            <p class="text-gray-400 font-medium text-sm">
                                {{ statistic.title }}
                            </p>
                            <p class="gap-x-2 items-baseline flex mt-2">
                                <span class="text-white tracking-tight font-semibold text-4xl">
                                    {{ statistic.value|money }}
                                </span>
                            </p>
                        </div>
                    {% endfor %}
                </div>
            </twig:CardBody>
        </twig:Card>

        <div class="py-8 text-gray-800">
            {% include 'partials/_breadcrumbs.html.twig' %}
            <div class="md:justify-between md:items-center md:flex mt-2">
                <div class="flex-1 min-w-0">
                    <h2 class="tracking-tight text-2xl sm:text-3xl sm:overflow-ellipsis text-white font-bold">
                        {{ 'dashboard.my_bills'|trans }}
                    </h2>
                </div>
                <div class="md:ml-4 mt-4 md:mt-0 shrink-0 flex">
                    <a href="{{ path('dashboard.bills.add') }}" class="button button-success">
                        {{ 'dashboard.add_bill'|trans }}
                    </a>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
            <div>
                <twig:Card>
                    <twig:CardHeader title="{{ 'dashboard.income.title'|trans }}"/>
                    <ul role="list" class="divide-y divide-gray-700">
                        {% for bill in bills %}
                            <li class="flex justify-between gap-x-6 py-5">
                                <div class="flex min-w-0 gap-x-4">
                                    <img class="size-12 flex-none rounded-full bg-gray-50" src="{{ bill.icon is not empty ? ('data:image/png;base64, ' ~ bill.icon) : 'placeholder.jpg' }}" alt="{{  bill.name }}"/>
                                    <div class="min-w-0 flex-auto">
                                        <p class="text-sm/6 font-semibold text-white">{{ bill.name }}</p>
                                        {% if bill.url is not empty %}
                                            <a href="{{ bill.url }}" class="text-white/40 text-sm" target="_blank">
                                                {{ bill.url }}
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="hidden shrink-0 sm:flex sm:flex-col sm:items-end">
                                    <p class="text-lg/6 text-white">{{ bill.amount|money }}</p>
                                    <p class="mt-1 text-xs/5 text-gray-300">{{ bill.interval.name }}</p>
                                    <div class="flex space-x-4 mt-2">
                                        <a href="{{ path('dashboard.bills.edit', {id: bill.id}) }}" class="button">
                                            {{ 'dashboard.bill.card.edit'|trans }}
                                        </a>
                                        <a href="{{ path('dashboard.bills.delete', {id: bill.id}) }}" class="button button-danger">
                                            {{ 'dashboard.bill.card.delete'|trans }}
                                        </a>
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </twig:Card>
            </div>

            <div>
                <twig:Card>
                    <twig:CardHeader title="{{ 'dashboard.my_bills'|trans }}"/>
                    <ul role="list" class="divide-y divide-gray-700">
                        {% for bill in bills %}
                            <li class="flex justify-between gap-x-6 py-5">
                                <div class="flex min-w-0 gap-x-4">
                                    <img class="size-12 flex-none rounded-full bg-gray-50" src="{{ bill.icon is not empty ? ('data:image/png;base64, ' ~ bill.icon) : 'placeholder.jpg' }}" alt="{{  bill.name }}"/>
                                    <div class="min-w-0 flex-auto">
                                        <p class="text-sm/6 font-semibold text-white">{{ bill.name }}</p>
                                        {% if bill.url is not empty %}
                                            <a href="{{ bill.url }}" class="text-white/40 text-sm" target="_blank">
                                                {{ bill.url }}
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="hidden shrink-0 sm:flex sm:flex-col sm:items-end">
                                    <p class="text-lg/6 text-white">{{ bill.amount|money }}</p>
                                    <p class="mt-1 text-xs/5 text-gray-300">{{ bill.interval.name }}</p>
                                    <div class="flex space-x-4 mt-2">
                                        <a href="{{ path('dashboard.bills.edit', {id: bill.id}) }}" class="button">
                                            {{ 'dashboard.bill.card.edit'|trans }}
                                        </a>
                                        <a href="{{ path('dashboard.bills.delete', {id: bill.id}) }}" class="button button-danger">
                                            {{ 'dashboard.bill.card.delete'|trans }}
                                        </a>
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </twig:Card>
            </div>
        </div>
    </div>
{% endblock %}